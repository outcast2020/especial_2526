<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta name="color-scheme" content="light"/>
<title>Presente de Natal na Pen√≠nsula de Itapagipe ‚Äî Salvador/BA</title>
  <meta name="description" content="Presente de Natal na Pen√≠nsula de Itapagipe (Salvador/BA): escreva palavras para quem voc√™ ama e abra um presente po√©tico com poemas e cord√©is para dedicar."/>
<style>
  :root{
    color-scheme: light;
    --sky:#c8efff;
    --sea:#36cfd3;
    --deep:#1572b6;
    --sand:#ffe4a3;
    --sun:#ffd56a;
    --accent:#e11d48;
    --accent2:#16a34a;
    --card:#ffffff;
    --stroke:rgba(15,23,42,.12);
    --text:rgba(15,23,42,.92);
    --muted:rgba(15,23,42,.62);
    --shadow:0 18px 60px rgba(2,6,23,.18);
    --radius:22px;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
    color:var(--text);
    min-height:100vh;
    background:
      radial-gradient(1200px 700px at 20% 12%, rgba(255,255,255,.95), transparent 55%),
      radial-gradient(900px 600px at 82% 10%, rgba(255,213,106,.86), transparent 45%),
      linear-gradient(180deg, var(--sky) 0%, #9ae6ff 28%, var(--deep) 44%, var(--sea) 66%, var(--sand) 100%);
    overflow-x:hidden;
  }
  .waves{
    position:fixed; inset:auto 0 0 0; height:42vh; pointer-events:none; opacity:.8;
    background:
      radial-gradient(900px 240px at 20% 60%, rgba(255,255,255,.45), transparent 62%),
      radial-gradient(900px 240px at 70% 72%, rgba(255,255,255,.36), transparent 62%),
      radial-gradient(900px 240px at 50% 88%, rgba(255,255,255,.26), transparent 62%);
  }
  .sun{
    position:fixed; top:26px; right:26px;
    width:112px; height:112px; border-radius:999px;
    background: radial-gradient(circle at 30% 30%, #fff4c6, var(--sun));
    box-shadow:0 0 60px rgba(255,213,106,.25);
    z-index:1;
  }
  .hat{ position:absolute; top:-22px; left:-6px; width:84px; height:54px; transform:rotate(-18deg);
    filter: drop-shadow(0 10px 18px rgba(0,0,0,.25));
  }
  .hat:before{ content:""; position:absolute; left:6px; top:10px; width:58px; height:36px;
    background:linear-gradient(135deg,#ff3a4c,#c90a1f);
    border-radius:10px 30px 18px 12px; transform:skewX(-10deg);
  }
  .hat:after{ content:""; position:absolute; left:0; top:40px; width:70px; height:16px;
    background:linear-gradient(180deg,#fff,#f2f2f2);
    border-radius:999px; box-shadow: inset 0 0 0 1px rgba(0,0,0,.05);
  }
  .pom{ position:absolute; left:58px; top:8px; width:18px; height:18px; border-radius:999px;
    background:radial-gradient(circle at 30% 30%, #fff, #e9e9e9);
    box-shadow:0 8px 14px rgba(0,0,0,.18);
  }

  .wrap{ max-width:1020px; margin:0 auto; padding:44px 18px 64px; position:relative; z-index:2; }
  header{ display:flex; justify-content:space-between; gap:18px; align-items:flex-start; margin-bottom:18px; }
  .brand{ display:grid; gap:6px; max-width:760px; }
  .kicker{ font-size:12px; letter-spacing:.18em; text-transform:uppercase; color:var(--muted); }
  h1{ margin:0; font-size:clamp(24px, 3.1vw, 40px); line-height:1.08; }
  .sub{ margin:0; color:var(--muted); font-size:15px; line-height:1.5; max-width:68ch; }

  .grid{ display:grid; grid-template-columns: 1.05fr .95fr; gap:16px; align-items:start; }
  @media (max-width: 900px){ .grid{ grid-template-columns:1fr; } .sun{ display:none; } }

  .card{
    background:rgba(255,255,255,.96);
    border:1px solid var(--stroke);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    overflow:hidden;
  }
  .inner{ padding:16px 16px 18px; }
  label{ display:block; font-size:13px; margin:10px 0 8px; }
  textarea, input[type="text"]{
    width:100%;
    border-radius:16px;
    border:1px solid rgba(15,23,42,.18);
    background:rgba(255,255,255,.98);
    color:var(--text);
    outline:none;
    font-size:16px;
    line-height:1.5;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.85);
  }
  textarea{ min-height:120px; padding:12px 12px; resize:vertical; }
  textarea:focus{ border-color:rgba(225,29,72,.35); box-shadow:0 0 0 4px rgba(225,29,72,.12); }
  input[type="text"]{ height:44px; padding:0 12px; }
  input[type="text"]:focus{ border-color:rgba(22,163,74,.35); box-shadow:0 0 0 4px rgba(22,163,74,.12); }

  .row{ display:flex; gap:10px; flex-wrap:wrap; margin-top:14px; align-items:center; justify-content:space-between; }
  .btns{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }

  button{
    border:0; cursor:pointer;
    border-radius:999px;
    padding:12px 14px;
    font-weight:750;
    font-size:15px;
    display:inline-flex;
    gap:10px;
    align-items:center;
    color:#06202a;
    background:linear-gradient(180deg, #ffeaa7, #ffd56a);
    box-shadow:0 14px 28px rgba(0,0,0,.18);
  }
  button:active{ transform: translateY(1px); }
  .ghost{
    background: rgba(255,255,255,.8);
    color:var(--text);
    border:1px solid rgba(15,23,42,.16);
    box-shadow:none;
    font-weight:650;
  }
  button[disabled]{ opacity:.55; cursor:not-allowed; }

  .pill{
    display:flex; gap:10px; align-items:center;
    padding:10px 12px;
    border-radius:999px;
    background:rgba(255,255,255,.72);
    border:1px solid rgba(15,23,42,.12);
    color:var(--muted);
    font-size:13px;
    user-select:none;
  }
  .pill input{ width:16px; height:16px; }

  .giftStage{ display:flex; align-items:center; justify-content:center; padding:20px; min-height:220px; }
  .gift{ width:160px; height:150px; position:relative; transform: translateZ(0); filter: drop-shadow(0 18px 24px rgba(0,0,0,.22)); }
  .gift .box{ position:absolute; inset:30px 0 0 0; border-radius:18px; background:#fff; border:1px solid rgba(0,0,0,.06); }
  .gift .lid{ position:absolute; left:-4px; right:-4px; top:0; height:56px; border-radius:18px;
    background:linear-gradient(180deg,#fff,#f3f3f3); border:1px solid rgba(0,0,0,.06);
    transform-origin: 20% 100%; transition: transform 600ms cubic-bezier(.2,.9,.2,1);
  }
  .gift .ribbonV{ position:absolute; top:0; bottom:0; left:50%; width:18px; transform:translateX(-50%); background:linear-gradient(180deg,#ff3a4c,#c90a1f); border-radius:10px; }
  .gift .ribbonH{ position:absolute; top:56px; left:0; right:0; height:18px; background:linear-gradient(180deg,#ff3a4c,#c90a1f); border-radius:10px; }
  .gift.open .lid{ transform: rotate(-22deg) translateY(-8px); }

  .result{ padding:0 16px 18px; }
  .meta{ display:flex; align-items:flex-start; justify-content:space-between; gap:12px; flex-wrap:wrap; padding-bottom:12px; border-bottom:1px dashed rgba(15,23,42,.18); }
  .kw{ font-size:13px; color:var(--muted); }
  .match{ font-size:12px; color:rgba(15,23,42,.55); }
  .ded{ margin-top:6px; font-size:13px; font-weight:750; color:rgba(15,23,42,.78); }
  .title{ margin-top:10px; font-weight:900; font-size:18px; }
  .author{ color:var(--muted); font-size:13px; margin-top:2px; }

  pre{ margin:14px 0 0; white-space:pre-wrap; word-break:break-word; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size:14px; line-height:1.55; color:rgba(2,6,23,.92);
  }

  .toast{ position:fixed; left:50%; bottom:22px; transform:translateX(-50%); padding:10px 12px; border-radius:999px;
    background:rgba(15,23,42,.86); color:#fff; font-size:13px; opacity:0; pointer-events:none; transition:opacity 220ms ease;
    z-index:99;
  }
  .toast.show{ opacity:1; }
  canvas#confetti{ position:fixed; inset:0; pointer-events:none; z-index:3; }

  .hidden{ display:none !important; }
</style>
</head>
<body>
  <div class="sun" aria-hidden="true">
    <div class="hat"></div>
    <div class="pom"></div>
  </div>
  <div class="waves" aria-hidden="true"></div>
  <canvas id="confetti"></canvas>

  <div class="wrap">
    <header>
      <div class="brand">
        <div class="kicker">Natal ‚Ä¢ Pen√≠nsula de Itapagipe ‚Ä¢ Salvador/BA</div>
        <h1>Presente de Natal na Pen√≠nsula de Itapagipe</h1>
        <p class="sub">Presentes po√©ticos para compartilhar com quem voc√™ ama. Escreva palavras soltas (suas e do destinat√°rio) e abra um presente: o jogo escolhe uma poesia com a melhor coincid√™ncia.</p>
      </div>
    </header>

    <div class="grid">
      <section class="card">
        <div class="inner">
          <label for="feelings">Palavras (ou uma frase) que descrevem voc√™ agora</label>
          <textarea id="feelings" spellcheck="false" placeholder="Ex.: alegre, cansado, esperan√ßoso, saudade, mar, recome√ßo..."></textarea>

          <label for="toName">Para quem √© este presente? <span style="color:var(--muted); font-weight:500;">(opcional)</span></label>
          <input id="toName" type="text" placeholder="Ex.: Ana, Jo√£o, minha m√£e, meu amor..." autocomplete="off"/>

          <label for="toWords">Palavras para o destinat√°rio <span style="color:var(--muted); font-weight:500;">(opcional, pesa mais na escolha)</span></label>
          <textarea id="toWords" spellcheck="false" style="min-height:84px" placeholder="Ex.: abra√ßo, cuidado, riso, coragem, paz, saudade..."></textarea>

          <div class="row">
            <div class="btns">
              <button id="openBtn" type="button">üéÅ Abrir presente</button>
              <button id="againBtn" class="ghost hidden" type="button" disabled>üîÅ Outro presente</button>
              <button id="copyBtn" class="ghost hidden" type="button" disabled>üìã Copiar poesia</button>
            </div>

            <label class="pill" title="Se a planilha estiver p√∫blica, o jogo tenta buscar nela. Se falhar, usa a lista embutida.">
              <input id="onlineToggle" type="checkbox"/>
              <span>Buscar na planilha</span>
            </label>
          </div>
        </div>
      </section>

      <section class="card">
        <div class="giftStage">
          <div class="gift" id="gift" aria-label="Presente">
            <div class="lid"></div>
            <div class="box"></div>
            <div class="ribbonV"></div>
            <div class="ribbonH"></div>
          </div>
        </div>

        <div class="result" id="result" hidden>
          <div class="meta">
            <div class="left">
              <div class="kw" id="kwLine">Chave do presente:</div>
              <div class="match" id="matchLine" hidden></div>
              <div class="ded" id="dedication" hidden></div>
              <div class="title" id="poemTitle"></div>
              <div class="author" id="poemAuthor"></div>
            </div>
            <div class="btns">
              <button id="shareBtn" class="ghost" type="button">‚ú® Copiar cart√£o</button>
            </div>
          </div>
          <pre id="poemText"></pre>
        </div>
      </section>
    </div>
  </div>

  <div class="toast" id="toast">OK</div>

<script>
/***********************
 * CONFIG (opcional)
 ***********************/
const SHEET_ID = "1CLiMo6QIayweUabLtH-EiFnOGSw6NwVgB9p9bqz6abY";
const SHEET_GID = "394623513";
// Colunas esperadas na planilha: A=Author, B=Title, C=Content, D=Views

/***********************
 * POEMAS (lista embutida)
 ***********************/
let POEMS = [];
const FALLBACK_POEMS = [{"author": "Fernando Pessoa", "title": "IV - I could not think of thee as piec√®d rot", "content": ",\"IV\n\nI could not think of thee as piec√®d rot,\nYet such thou wert, for thou hadst been long dead\nYet thou liv'dst entire in my seeing thought\nAnd what thou wert in me had never fled.\nNay, I had fixed the moments of thy beauty ‚Äî\nThy ebbing smile, thy kiss's readiness,\nAnd memory had taught my heart the duty\nTo know thee ever at that deathlessness.\nBut when I came where thou wert laid, and saw\nThe natural flowers ignoring thee sans blame,\nAnd the encroacbing grass, with casual flaw,\nFraming the stone to age where was thy name,\nI knew not how to feel, nor what to be\n Towards thy fate's material secrecy.", "views": 1982843}, {"author": "Fernando Pessoa", "title": "Rezas porque outros rezaram", "content": ",\"Rezas porque outros rezaram,\nE vestes √† moda alheia...\nQuando amares v√™ se amas\nSem teres o amor na ideia.", "views": 1982842}, {"author": "Fernando Pessoa", "title": "A estrada inteiramente insubjectiva", "content": "A estrada inteiramente insubjectiva\nBranca, branca, sem pensamento algum", "views": 1982840}, {"author": "Fernando Pessoa", "title": "THINGS THAT HAPPEN IN SOCIETY", "content": "Apollo married and Hercules married, and this was in real life. \nThe wife of Hercules loved beautiful rather than strong men,\nAnd strong and not beautiful men was the taste of Apollo's wife.", "views": 1982839}, {"author": "Fernando Pessoa", "title": "No ocaso", "content": "sobre Lisboa, no t√©dio dos dias que passam,\",\"No ocaso, sobre Lisboa, no t√©dio dos dias que passam,\nFixo no t√©dio do dia que passa permanentemente\nMoro na vig√≠lia involunt√°ria como um fecho de porta\nQue n√£o fecha coisa nenhuma.\nMeu cora√ß√£o involunt√°rio, impulsivo,\nNaufraga a esfinges indigentes\nNas consequ√™ncias e fins, [acordando?] no [al√©m?]...", "views": 1982838}, {"author": "Fernando Pessoa", "title": "Quem te deu aquele anel", "content": "Quem te deu aquele anel\nQue ainda ontem n√£o tinhas?\nComo tu foste infiel\nA certas ideias minhas!", "views": 1982837}, {"author": "Fernando Pessoa", "title": "HERE AND THERE", "content": "Here is the same as there, my friend, \nAll places in this world are like.\nIf doomed thy life in grief to spend,\nWhat change can then thy fate amend,\nWhat from thy soul the pain can strike?\n\nWhen pain doth wound the tired heart\nAnd grief doth tie the fevered eye,\nSome joy indeed the world's great art\nMay to thy pained soul impart -\nWhat's this if joy in thee not lie?\n\nWhen on my restless couch I lie\nAnd count the throbbing of my breath,\nI see the joy of earth and sky\nYet hate it all; why should not I\nSo keep my coward mind from death?\n\nTrue joy comes not from outward show\nBut in our deepest soul doth rest.\nWhat matter if the sun can glow\nAnd stars at night look sweetly so\nWhen hearts are by their grief opprest?\n\nFor when the darkness weighs thy thought,\nAnd night doth fall upon thy soul,\nAre not again thy sorrows brought?\nIs not thy mind in shadows caught?\nDo fears not back upon thee roll?\n\nI cannot do but hope; as mine\nThy mind I see to hopes doth bend;\nI in my land and thou in thine\nWe suffer both - our griefs entwine.\nHere is the same as there, my friend.", "views": 1982836}, {"author": "Fernando Pessoa", "title": "FLASHES OF MADNESS ‚Äî V", "content": "V.\n\nMy child, I see thine eyes upon\nA shadow, as cast by the wings\nWhen a swift bird passes close by\nThe castle-window before the sun:\nSo through thy glance the shadows fly...\n\nThe souls of things dead and bygone\n Haunt the appearances of living things", "views": 1982833}, {"author": "Fernando Pessoa", "title": "FLASHES OF MADNESS ‚Äî III", "content": "III.\n\nEyes are strange things.\nMeaning in them becomes life,\nLife in them has wings.\n\nLook at me thus. Thy glance is mad and rare.\nThine eyes show deep and wild an inner strife.\n ¬†¬†¬†¬†¬†¬†¬†¬†How they are more than Horror fair!", "views": 1982832}, {"author": "Fernando Pessoa", "title": "Seldom have I so inly comprehended", "content": "Seldom have I so inly comprehended\nWith a deep sense so awful and so rude\nMy complete being's complete solitude\nIn all its arid loneliness extended\n\nSo wholly solitude, so much unblended\nWith aught else, good or ill, that might intrude\nUpon its horror limitless and nude\nWhereat my reason reels, not by (...) defended.\nAnd save it from itself (‚Ä¶)", "views": 1982831}, {"author": "Fernando Pessoa", "title": "E quanto sei do Universo √© que ele", "content": "E quanto sei do Universo √© que ele\nEst√° fora de mim.", "views": 1982829}, {"author": "Fernando Pessoa", "title": "EPIGRAMS - VII", "content": "Pius the Tenth, your letter, bull -\nWhate'er it is, with great attention\nI read, although 'tis rather dull;\nAnd, to speak true, not to deceive,\nThese words synthetise the impression\nThat from your bull I did receive: -\n\nHow much of that do you believe?", "views": 1982828}, {"author": "Fernando Pessoa", "title": "√ì curva do horizonte", "content": "quem te passa,\",\"√ì curva do horizonte, quem te passa, \nPassa da vista, n√£o de ser ou estar.\nN√£o chameis √† alma, que da vida esvoa√ßa,\nMorta. Dizei: Sumiu-se al√©m no mar.\n\n√ì mar, s√™ s√≠mbolo da vida toda ‚Äî\nIncerto, o mesmo e mais que o nosso ver!\nFinda a viagem da morte e a terra √† roda,\nVoltou a alma e a nau a aparecer.", "views": 1982827}, {"author": "Fernando Pessoa", "title": "Mon√≥logo √† Noite", "content": "Tenha eu a dimens√£o e a forma informe\nDa sombra e no meu pr√≥prio ser sem forma\nEu me disperse e suma!\nToma-me, √≥ noite enorme, e faz-me parte\nDo teu frio e da tua solid√£o,\nConsubstancia-me com os teus gestos\nParados, de sil√™ncio e de incerteza,\nCasa-me no teu sentido de (...)\nE anulamente... Que eu me torne parte\nDas ra√≠zes nocturnas e dos ramos\nQue se agitam ao luar... Seja eu p'ra sempre\nUma paisagem numa encosta em ti...\nNuma absoluta e (...) inconsci√™ncia\nEu seja o gesto irreal do teu beijo\nE a cor do teu luar nos altos montes\nOu, negrume absoluto teu, que eu seja\nApenas quem tu √©s e nada mais...\nSuspende-me no teu a√©reo modo,\nComigo envolve as estrelas e espa√ßo!\nE que o meu vasto orgulho se contente\nDe teu ter infinito, e a vida tenha\nPiedade por mim pr√≥prio no consolo\nDa tua calma in√∫mera e macia...", "views": 1982826}, {"author": "Fernando Pessoa", "title": "XXIII - Even as upon a low and cloud-domed day", "content": ",\"Even as upon a low and cloud-domed day,\nWhen clouds are one cloud till the horizon.\nOur thinking senses deem the sun away\nAnd say ¬´'tis sunless¬ª and ¬´there is no sun¬ª\nAnd yet the very day they wrong truth by\nIs of the unseen sun's effluent essence,\nThe very words do give themselves the lie,\nThe very thought of absence comes from presence:\nEven so deem we through Good of what is evil.\nHe speaks of light that speaks of absent light,\nAnd absent god, becoming present devil,\nIs still the absent god by essence' right.\nThe withdrawn cause by being withdrawn doth get\n (Being thereby cause still) the denied effect.", "views": 1982825}, {"author": "Fernando Pessoa", "title": "Tiraste o linho da arca", "content": ",\"Tiraste o linho da arca,\nDa arca tiraste o linho.\nMeu cora√ß√£o tem a marca\nQue lhe puseste mansinho.", "views": 1982824}, {"author": "Fernando Pessoa", "title": "Ah qualquer cousa", "content": ",\"(after useless discussion)\n\nAh qualquer cousa,\nOu sono ou sonho, sem doer isole\nO meu j√° isolado cora√ß√£o!\nSe as palavras que eu diga nunca podem\nLevar aos outros mais do que o sentido\nQue essas palavras neles t√™m, e [existo]\n[Por] fora do que digo, oculto nele\nComo o esqueleto nesta carne minha,\nInvis√≠vel estrutura do vis√≠vel,\nDiferente e essencial...\n\nCai sobre mim, apagamento meu!\nQuerer querer, in√∫til pedra ao mar!\nSaco p'ra colher vento, cesto de √°gua,\nCa√ßador s√≥ do uivar dos lobos longe...", "views": 1982823}, {"author": "Fernando Pessoa", "title": "(after running away. (He never loves))", "content": "(after running away. (He never loves)) \n\nN√£o sei viver! nem fui para viver\nDestinado; porqu√™ ent√£o a vaga\nAspira√ß√£o que tenho?", "views": 1982822}, {"author": "Fernando Pessoa", "title": "RONDEAU ‚Äî I swore my love should never fall", "content": "I swore my love should never fall\nFor her, the one entrancing she\nI promised marriage, I recall,\nAnd said none was more dear to me.\nBut soon this love began to fall,\nAnd all her joy was turned to gall\nTill from the beak there came a call\nTo mind me that in times of glee\nI swore.\n\nAt court all men she did enthrall,\nMyself was left no room to crawl\nShe won the case. When I did see\nFive thousand was the hellish fee,\nWhy ‚Äî hang it ‚Äî then, confound it all,\n¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†I swore.", "views": 1982821}, {"author": "Fernando Pessoa", "title": "O horror metaf√≠sico de Outrem!", "content": "O horror metaf√≠sico de Outrem!\nO pavor de uma consci√™ncia alheia,\nComo um deus a espreitar-me! Quem me dera\nSer a √∫nica consci√™ncia animal\nPara n√£o ter olhares sobre mim!\n\nDos olhos de cada um me fita, vivo,\nO mist√©rio de ver; e o horror de verem-me\nAbisma-me.\n\nN√£o posso conceber-me outro, ou pensar\nQue a consci√™ncia que de mim √© g√©mea\nPossa ter outra forma, e um conte√∫do\nDiferentemente diferente. S√≥ vejo\nHomens, bichos, as feras e as aves,\nHorrivelmente vivas e fitando.\nSou como um Deus supremo que se houvesse\nReconhecido em mim o √∫nico,\nE a cujo olhar in√∫mero se abeira\nO horror de mais in√∫meros olhares.\n\nAh, se em mim se reflecte o transcendente\nBrilho al√©m de Deus!", "views": 1982819}, {"author": "Fernando Pessoa", "title": "Thou needst not scorn me. All my praise of thee", "content": "Thou needst not scorn me. All my praise of thee \nThough't be of that which opens men's desire\n(Being of thy beauty), from desire is free.\nMy flame upon thine altars has no fire.\n\nBeauty should beauty mate, lest by addition\nIt do subtraction suffer. So I name\nThy true mate beautiful. Thus my perdition\nMyself desire and mine own love disclaim.\n\nThat this renouncement of the very thought\nOf thy possible love, were't such or no,\nGives pain, is sure; yet the pain given does not\nFrom the renouncement, but its reason, flow.\n\nThe gods that fated me not beautiful\nFated this just renouncement possible.", "views": 1982817}, {"author": "Fernando Pessoa", "title": "Cedo demais vem sempre", "content": "Clo√©, o inverno.\",\"Cedo de mais vem sempre, Clo√©, o inverno.\n√â sempre prematuro, inda que o espere\nNosso h√°bito, o esfriar\nDo desejo que houve.\n\nN√£o entardece que n√£o morra o dia.\nN√£o nasce amor ou f√© em n√≥s que n√£o\nMorra com isso ao menos\nO n√£o amar ou crer.\n\nTodo o gesto que o nosso corpo faz\nCom o repouso anterior contrasta.\nNesta m√° circunst√¢ncia\nDo tempo eternos somos.\n\nS√≥ sabe da arte com que viva a vida\nAquele que, de t√£o cont√≠nua us√°-la,\nFurte ao tempo a vit√≥ria\nDas mudan√ßas depressa,\n\nE entardecendo como um dia tr√≥pico,\nAt√© ao fim inevit√°vel guie\nUma igual vida, s√∫bito\nPrecipite no abismo.", "views": 1982815}, {"author": "Fernando Pessoa", "title": "... Como", "content": "nos dias de grandes acontecimentos no centro da cidade,\",\"... Como, nos dias de grandes acontecimentos no centro da cidade,\nNos bairros quase-exc√™ntricos as conversas em sil√™ncio √†s portas\nA expectativa em grupos...\nNingu√©m sabe nada.\n\nLeve rastro de brisa\nCoisa nenhuma que √© real\nE que, com um afago ou um sopro\nToca o que h√° at√© que seja...\nMagnific√™ncia da naturalidade.\nCora√ß√£o.\nQue √Åricas in√©ditas em cada desejo!\nQue melhores coisas que tudo l√° longe!\n\nMeu cotovelo toca no da vizinha do el√©ctrico\nCom uma involuntariedade fruste\nCurto-circuito da proximidade...\nIdeias ao acaso\nComo um balde que se entornou ‚Äî\n\nFito-o √© um balde entornado...\n\nJaz: jazo...", "views": 1982814}, {"author": "Fernando Pessoa", "title": "EPIGRAMS - III", "content": "If rank [?] the guinea‚Äëstamp but be, \nWhy, to this one thing may be said:\nThat 'tis only midst men we see\n¬†¬†¬†¬†¬†¬†¬†¬†A guinea‚Äëstamp on head [?]", "views": 1982813}, {"author": "Fernando Pessoa", "title": "Ah as horas indecisas em que a minha vida parece de um outro...", "content": "Ah as horas indecisas em que a minha vida parece de um outro...\nAs horas do crep√∫sculo no terra√ßo dos caf√©s cosmopolitas!\nNa hora de olhos h√∫midos em que se acendem as luzes\nE o cansa√ßo sabe vagamente a uma febre passada.", "views": 1982812}, {"author": "Fernando Pessoa", "title": "Entornaram-me o cabaz", "content": "Entornaram-me o cabaz \nQuando eu vinha pela estrada.\nComo ele estava vazio,\nN√£o houve loi√ßa quebrada.", "views": 1982810}, {"author": "Fernando Pessoa", "title": "A folha insciente", "content": "antes que a pr√≥pria morra\",\"A folha insciente, antes que a pr√≥pria morra\nPara n√≥s morre, Clo√©,\nPara n√≥s, que sabemos que ela morre\nAssim, Clo√©, assim\nAntes que os pr√≥prios corpos, que empregamos\nNo amor, ela envelhece.\nAssim, diversos, somos, inda jovens,\nS√≥ a m√∫tua lembran√ßa.\nAh, se o que somos √© sempre isto, e apenas\nUma hora √© o que somos,\nCom tal f√∫ria nessa hora nos usemos\nQue arda sua lembran√ßa\nComo vida, e nos beijemos, Clo√©,\nComo se, findo o beijo\n√önico, houvesse de ruir a s√∫bita\nMole do morto mundo.", "views": 1982809}, {"author": "Fernando Pessoa", "title": "N√£o poder Tarde", "content": "N√£o poder Tarde\nAdivinhar (...) o teu segredo\nE o teu mist√©rio il√∫cido ignorar\nE o que tens que (...) esta emo√ß√£o\nEncontrar ¬†¬†(...) ¬†¬†¬†e o sentido,\nVaga desesperan√ßa quase amarga,\nDa sensa√ß√£o que d√°s. D√°s-me um aumento\nDa muda como√ß√£o     indefinida\nQue sonha dentro em mim, uma √¢nsia como\nQue um esquecer de mal lembradas cousas,\nOu de esquecidas vago     relembrar,\nIntensas, rumorosas, torturadas,\nM√°goas de quem (a) existir se sente,\nInconsol√°vel desespera√ß√£o,\nVazia plenitude do sofrer.", "views": 1982808}, {"author": "Fernando Pessoa", "title": "Pouco a pouco o campo se alarga e se doura.", "content": "Pouco a pouco o campo se alarga e se doura.\nA manh√£ extravia-se pelos irregulares da plan√≠cie.\nSou alheio ao espect√°culo que vejo: vejo-o.\nE exterior a mim. Nenhum sentimento me liga a ele,\nE √© esse o sentimento que me liga √† manh√£ que aparece.", "views": 1982805}, {"author": "Fernando Pessoa", "title": "E ao acabar estes versos", "content": "E ao acabar estes versos\nFeitos em modo menor\nCumpre prestar homenagem\n√Ä bebedeira do cantor.", "views": 1982804}, {"author": "Fernando Pessoa", "title": "Sorrow no more for the faded rose", "content": ",\"Sorrow no more for the faded rose, \nNor of the yellow lily despair.\nThese, as we see them, are but their shows.\nThey are elsewhere.\n\nTis but their shadow lives in our light.\nAs we see them (...)\nThey live more truly in our delight\nThan in their forms.\n\nThe beauty they had was never lost,\nIt moved away\nFrom the present hour and the form once tossed\nInto space and day.\n\nBut the undying essence of the (...)\n\nThe rose that faded from yesterday\nIs where yesterday is.\nI shall have again the flower and the day,\nThe self and the bliss.", "views": 1982803}, {"author": "Fernando Pessoa", "title": "SALUTE TO THE SUN‚ÄôS ENTRY INTO ARIES", "content": "Now at the doorway of the coming year,\nYe nymphs do gather and the garlands twine\nThat heroes' sons will bear\nFifty years hence in their remembering hands\nAnd of their fathers speak with shining eyes\nAnd of the war that stained the lands.\n\nWeave ye the garlands, for the fame will pass,\nAnd their grandchildren of grandchildren will\nNo more remember, neither care\nWho their ancestor was\nWho did that old crown, now scarce a crown, bear\nFor all must pass, that Time may have his fill.\n\nWeave ye the garlands therefore, for this hour\nWill not survive beyond the memory\nOf those yet near to it who have the power\nThe hour somewhat like what it was to see.\nWeave ye the garlands, weave\nThat their memory may live\nAwhile, and if that mean that fame is nought,\nWeave still the garlands with a gentle thought,\nFor weaving them, know ye\nWhat to Time's elder shades you yet may give.\nThe days are heavy with the blood of men,\nThe year reels like a shattered wall\nWhen the wind comes out of the caves of night.\nOur minds are equal with the shaking...\nWe know not on what power to call\nOr which side of the Truth lies right.\n\nAlas! alas! all sides are right in war,\nAnd that impartial vision born of peace,\nAnd that the Gods alone can have,\nLives only in our wish that dim wars mar,\nBreathes only in the halls of our release\nFrom all the human things for which we crave.\n\nBut these are thoughts, and life is grief and fear.\nWeave ye the garlands, lest the coming year\nForget, like ye, the fallen to remember\nAnd the victors to greet.\nWeave ye the garlands made\nOf some strange flower that lasts unto December\nAnd lay them at Fate's unseen feet.\n\nAy, for not for the heroes nor the slain\nWeave ye the garlands woven with your pain.\nNot for the fallen do your cheeks awhile\nFlush then grow pale and your proud pain smile.\nNot for a man nor for a nation do\nYour garlands outreach Time\nPerhaps and in eternal regions chime\nWith the sense of their fame who were e'er true.\n\nFor Fate alone all garlands woven are.\nUnto Fate's feet the rivers of our tears\nPerennial run, nor is there aught more far\nAlas! than mere Fate that outwits the sun,\nAnd that in circles round its empty name\nCarries the vain course of our sterile fame\nAnd great men as great nations equal lead\nVainly around the frame\nOf nothing, like a wind along a mead.\n\nYet, whether for some man or for no man,\nWhether for personal hopes or Fate no one,\nYour garlands weave, lest the year come und span\nWith days fame‚Äëempty the task e'er begun.\nWeave garlands, green glad garlands, garlands sad,\nGarlands of all sorts, if they glory mean,\nCarry your woven garlands to their grave...\nThe rest is something that cannot be had -\nThe void as of a ship sunk nor more seen\nBeneath the wave.", "views": 1982802}, {"author": "Fernando Pessoa", "title": "N√£o me concebo amando", "content": "nem dizendo\",\"N√£o me concebo amando, nem dizendo\nA algu√©m ¬´eu te amo¬ª, sem que me conceba\nSob uma outra alma que n√£o √© a minha\nToda a expans√£o e transfus√£o de vida\nMe horroriza como a avaro a ideia\nDe gastar e gastar inutilmente,\nInda que no gastar se esboce gozo,\nUm terror como de crime,\nUma frieza como ante o imposs√≠vel\nTolhe a pr√≥pria vis√£o dum meu amor\nDentro em meu ser. Sentir amor, talvez,\nPois quem sabe o que est√° fadado\n(...) ¬†;mas amar, amar,\nNunca... n√£o s√≥ o horror de (...)\nMas o pudor de dizer o que sinto\nE ser amante aos olhos e ouvidos\nDuma alma consciente, o entregar-me\nEu, o mist√©rio de uma consci√™ncia,\nAo mist√©rio duma outra consci√™ncia.\nO poder estar inerte e (...)\nQue s√≥ concebo como meu.\n\nA vida √© o esquecer-se continuamente\nMas eu, nesta minha intensa vida,\nVivi em mim t√£o solitariamente,\nQue n√£o sei esquecer-me, nem tirar\nDe mim meus olhos d'alma; e em cada gesto\nDe amor que eu fazia, analis√°-lo\nAt√© lhe descobrir o horror e (...)\nDa ess√™ncia do mist√©rio; e ao ver t√£o perto\nComo entre minhas m√£os o revelado\nHorror de tudo, logo deixarei\nA possibilidade de amar\nCair delas tremendo. Do universo\nA alma misteriosa eu sempre atento\nEm toda a parte vejo; se j√° estas\nInanimadas cousas que me cercam\nMe d√£o, nas muitas horas em que as fito,\nN√£o com os sentidos mas com a alma logo,\nDirectamente como com a vista,\nMe torturam, no auge do terror\nPelo mist√©rio que n√£o s√£o e s√£o\nQuanto mais ‚Äî oh horror de o conceber! ‚Äî\nAo ouvir vozes √≠ntimas de alma\nDe um ser amante ‚Äî minhas ou para mim ‚Äî\nAo ouvir assim perto, ao ver assim\nPr√≥ximo da minha alma sempre atenta\nUma voz do mist√©rio feito vida ‚Äî\nQuanto mais, como se a solu√ß√£o\nDo mist√©rio mesmo me turbasse\nAt√© √† morte de terror e espanto,\nN√£o se me esfriaria em medo a alma\nAo ver em um olhar brilhar o horror\nDe haver consci√™ncia e exist√™ncias.\n\nN√£o √© o acanhamento virginal\nQue da pr√≥pria lux√∫ria se perturba,\nNem o ideal pudor, por delicada\nA alma, do que em amar √© grosseria\nInevitavelmente; n√£o o medo\nDe ser inapreciado ou ser tro√ßado\nNem terror de impot√™ncia a Ser (...)\nMe ocupa. √â mais negro sentimento\nMais √≠ntimo, mais frio e mais ligado\nAo que, de continuado pensamento,\nMe √© o que eu chamo a alma que √© minha.\nE isto\nDecerto lograria a incompreens√£o\nQue primordial n√£o √© no meu temer\nE a tro√ßa da alma no olhar espreitando\nE (...) de quem √©\nDiferente de todos e de tudo,\nComo um universo √† parte, grande nisto\nMas sem poder d'algu√©m ser entendido\nSen√£o por louco, ou desvairado ou triste,\nInj√∫rias de insufici√™ncia e acanhamento\nDe compreens√£o.", "views": 1982799}, {"author": "Fernando Pessoa", "title": "EPIGRAMS - VIII", "content": "He asked me, half in his fine compassion, \nTo sketch in two strokes his portrait high;\n'Tis done: a coat strikingly in fashion\n¬†¬†¬†¬†¬†¬†¬†¬†And a red tie.", "views": 1982798}, {"author": "Fernando Pessoa", "title": "Toda a noite", "content": "toda a noite,\",\"Toda a noite, toda a noite,\nToda a noite sem pensar...\nToda a noite sem dormir\nE sem tudo isso acabar.", "views": 1982795}, {"author": "Fernando Pessoa", "title": "Nuvem do c√©u", "content": "que pareces\",\"Nuvem do c√©u, que pareces\nTudo quanto a gente quer,\nSe tu, ao menos, me desses\nO que se n√£o pode ter!", "views": 1982794}, {"author": "Fernando Pessoa", "title": "Tu", "content": "ao canto da janela,\",\"Tu, ao canto da janela, \nSorrias a algu√©m da rua.\nPorqu√™ ao canto, se aquela\nPosi√ß√£o n√£o √© a tua?", "views": 1982793}, {"author": "Fernando Pessoa", "title": "Temo a verdade.", "content": "Temo a verdade.\nIgnorar √© amar. Toda esta terra,\nEstes montes (...) n√£o os amara tanto\nSe soubera o que s√£o, e enfim os vira\nComo os n√£o vejo. Pudesse eu sem termo\nGozar, sofrendo embora a ilus√£o\nSem que a quebrasse. Como s√£o tristes\nOs sonhos meus, inda que lhes pese,\nS√≥ porque sonhos s√£o, que n√£o a vida,\nAssim serem. ¬†[?]", "views": 1982791}, {"author": "Fernando Pessoa", "title": "Estou escrevendo sonetos regulares", "content": "Estou escrevendo sonetos regulares\n(Ou quase regulares) como um poeta...\nMas se eu dissesse a algu√©m a dor completa\nQue me faz ter tais gestos e tais ares,\n(...)\n\nNingu√©m acreditava. √ì grandes mares\nDa emo√ß√£o subindo em n√©voa preta\nAt√© a m√°goa ser como a do asceta.\n(...)\nCom um estalido de \"\"mola de press√£o\nFecho a carteira dos apontamentos\nOnde fixei a minha indecis√£o,\n\nN√£o sou meu ser, nem sou meus pensamentos,\nA minha vida √© um pr√≠ncipe ao balc√£o", "views": 1982788}, {"author": "Fernando Pessoa", "title": "Sempre que penso uma coisa", "content": "traio-a.\",\"Sempre que penso uma coisa, traio-a.\nS√≥ tendo-a diante de mim devo pensar nela.\nN√£o pensando, mas vendo,\nN√£o com o pensamento, mas com os olhos.\nUma coisa que √© vis√≠vel existe para se ver,\nE o que existe para os olhos n√£o tem que existir para o pensamento\nS√≥ existe verdadeiramente para o pensamento e n√£o para os olhos.\n\nOlho, e as coisas existem.\nPenso e existo s√≥ eu.", "views": 1982787}, {"author": "Fernando Pessoa", "title": "A Inoc√™ncia Perdida", "content": "Tinha um campo alegre,\nMas no ardor da febre\nDevastei-o, e ent√£o\nSemeei-lhe amores\nE nasceram flores\nDe desilus√£o,\n\nTinha um barco lindo que pela √°gua ia,\nComo nuvem branda pelo brando c√©u\nCarreguei-o d'oiro que o labor trazia\nE so√ßobrou logo que vogar queria\nE eu fiquei nas ondas sem o barco meu.\n\nA jarra preciosa est√° partida\nE nada valem os fragmentos seus\nA imagem do templo est√° ca√≠da\nPartiu-se. Era de barro. Os seus crentes,\nperdeu-os.\n\nJunta os fragmentos da jarra divina\nE a jarra n√£o fazem;", "views": 1982785}, {"author": "Fernando Pessoa", "title": "N√£o me digas que me queres", "content": "N√£o me digas que me queres\nPois n√£o sei acreditar.\nNo mundo h√° muitas mulheres\nMas mentem todas a par.", "views": 1982784}, {"author": "Fernando Pessoa", "title": "(ap√≥s as can√ß√µes da tarde)", "content": "Com o s√∫bito frio do crep√∫sculo\nEntra em minh'alma um frio mais subtil\nCorporeamente entra o mist√©rio em mim\nE eu comungo a presen√ßa ausente sua.\nSua presen√ßa (...) se volve eucaristia\nDe sombra. Sua carne e o seu sangue\nDe universo e al√©m me tornam seu.\n\nTerras, c√©us\nA irrealidade do mundo\nA realidade de Deus,\nTudo sorvo em meu mist√©rio\nTudo √© irreal ante mim,\n√ì infinitos!\nTranscendo o que n√£o tem fim.", "views": 1982783}, {"author": "Fernando Pessoa", "title": "Na quinta que nunca houve", "content": "Na quinta que nunca houve\nH√° um po√ßo que n√£o h√°\nOnde h√°-de ir encontrar √°gua\nAlgu√©m que te entender√°.", "views": 1982782}, {"author": "Fernando Pessoa", "title": "Sauda√ß√£o a todos quantos querem ser felizes:", "content": "Sauda√ß√£o a todos quantos querem ser felizes:\nSa√∫de e estupidez!\nIsto de ter nervos\nOu de ter intelig√™ncia\nOu at√© de julgar que se tem uma coisa ou outra\nH√°-de acabar um dia...\nH√°-de acabar com certeza\nSe os governos autorit√°rios continuarem.", "views": 1982780}, {"author": "Fernando Pessoa", "title": "41 - TO ONE SINGING", "content": "O voice the angels kissed when unbreathed yet! \nO lips made spiritual with uttering it!\nO eyes wild with the lust of the divine\nIn thy felt presence, making thee its shrine!\nO that this moment of thee were Thyself!\nThat thou ne‚Äôer fell'st from this Thou, and the pelf\nOf gathered days with avarice of living,\nTouched thee not from this moment of God's giving!\nO eternal actuality of thee!\nO by thy voice sculptured immutably\nIn some stone‚Äëflesh of spirit! O set free\nFrom being all contained in being seen!\nO firmament of joy purely serene\nWith spaciousness of soul and stars of song\nAbove thyself, God's human heights among!\n\nSing on, and let thy singing be a couch\nTo that of me which to my soul doth vouch\nOf God as of a self and of a home!\nDissolve me to thy notes! Make me become\nAn outside of myself, and have in me\nNought but a selfless sense of hearing thee!\nLet me pertain to the sounds thou dost voice!\nLet me be other than I and rejoice\nHearing time like a breeze pass by the place\nThy song imprisons in its halcyon grace!\n\nThy voice compels to parapets from heaven\nDim winged happinesses whence is woven\nTo our souls such a glamour, spirit‚Äëfair,\nThat, feeling it, all life becomes despair\nAnd all the sense of life to wish to die.\nSing on! Between the music's human cry\nAnd thy song's meaning there is interposed\nSome third reality, less life‚Äëenclosed,\nSome subtler tenderness than music makes\nOr words sung, and its moonless moonlight takes\nOur visionary moods by their child‚Äëhand\nAnd our tired steps begin to understand.\n\nSing, nor stop singing till bliss ache too much!\nO that I could, without moving my hand,\nStretch forth some hand imaginary and touch\nThat body of thine thy singing giveth thee!\nThat kiss‚Äëlike touch would wake eternity\nIn me again, and, as by a great morn,\nThe night my body makes of me were torn\nAway from being, and my unbodied shape\nWould, like a ship doubling the final cape,\nCome to that sight of port and shiver of coming\nThat God allows to those whose bliss of roaming\nIs no more than the wish to find His peace\n And mingle with it as a scent with the breeze.", "views": 1982776}, {"author": "Fernando Pessoa", "title": "A ess√™ncia de mist√©rio o seu horror", "content": "A ess√™ncia de mist√©rio o seu horror\nEst√° n√£o s√≥ em nada compreender\nMas em n√£o saber porque nada se compreende.", "views": 1982774}, {"author": "Fernando Pessoa", "title": "Quando √© o tempo do trigo", "content": "Quando √© o tempo do trigo\n√â o tempo de trigar.\nA verdade √© um postigo\nA que ningu√©m vem falar.", "views": 1982773}, {"author": "Fernando Pessoa", "title": "Estou acima do que agrada aos grandes", "content": "Estou acima do que agrada aos grandes\nOu aos cultos apraz, a s√≥s comigo\nE com o mist√©rio.\n\nTornei a minha alma exterior a mim.", "views": 1982772}, {"author": "Fernando Pessoa", "title": "Sorrow sits by my side", "content": "Sorrow sits by my side\nFondling my careless hair.\nShe is the lady of golden\nGestures to silence beholden.\nOnly she does not deride\nMy dreams and what makes them fair.\n\nNow she doth cease and whisper\nThe use of dreams to my soul.\nShe tells me they mean God's blessing\nThe spirit's shining releasing\nFrom the world's weight and sister\nTo life's unchanging whole.", "views": 1982770}, {"author": "Fernando Pessoa", "title": "I have wished so oft this mockery might end", "content": "I have wished so oft this mockery might end\nOf love between us! And it's ended now.\nYet I cannot even to myself pretend\nThat the wished thing achieved gives joy enow.\n\nEvery going is a parting too.\nOur happiest day doth make us one day older.\nTo get stars we must have darkness also,\nThe fresher hour is likewise the colder.\n\nI dare not hesitate not to accept\nThy separating letter, yet I wish\nWith some vague jealousy I scarce reject\nThat things were fitted for a different stretch.\n\nFarewell! Yet do I smile at this or not?\nMy feeling now is lost in thought.", "views": 1982768}, {"author": "Fernando Pessoa", "title": "¬´Mau", "content": "Maria!¬ª ‚Äî tu disseste\",\"¬´Mau, Maria!¬ª ‚Äî tu disseste \nQuando a tran√ßa te ca√≠a.\nQual ¬´Mau, Maria¬ª, Maria!\n¬´M√° Maria!¬ª ¬´M√° Maria!¬ª", "views": 1982767}, {"author": "Fernando Pessoa", "title": "Voam d√©beis e enganadas", "content": "Voam d√©beis e enganadas\nAs folhas que o vento toma.\nBem sei: deitamos os dados\nMas Deus √© que deita a soma.", "views": 1982766}, {"author": "Fernando Pessoa", "title": "Nuvem alta", "content": "nuvem alta,\",\"Nuvem alta, nuvem alta,\nPorque √© que t√£o alta vais?\nSe tens o amor que me falta,\nDesce um pouco, desce mais.", "views": 1982765}, {"author": "Fernando Pessoa", "title": "Boca que o riso desata", "content": "Boca que o riso desata\nNuma alegria engra√ßada,\n√âs como a prata lavrada\nQue √© mais o lavor que a prata.", "views": 1982764}, {"author": "Fernando Pessoa", "title": "52 - SUMMERLAND", "content": "One day, Time having ceased,\nOur lives shall meet again,\nFrom Place and Name released.\nOnly that shall remain\nOf each of us that may\nSeem natural to that Day.\n\nThere we will newly love,\nWondering at the old mood\nWith which love did us move,\nWhen pain and solitude\nWere what each soul had got\nFor its contingent lot.\n\nThere, heaven being between us\nAnd touch a real thing,\nThe texture luminous\nOf our true lives will bring\nGod into our love like breath.\nNowhere will there be death.\n\nThe need to suffer and sigh,\nThe inevitable cares,\nThe awaiting and the cry\nThat goes from joy to tears -\nThese have no need to be\nIn love's eternity.\n\nThe hours shall make our love\nGrow younger, not more old.\nSome trick of time shall move\nWont even to truer gold,\nRegret shall not be aught\nPossible there to thought.\n\nThat region light‚Äësuspended\nUnder truer blue skies\nShall let our souls feel blended,\nYet be true unities.\nNought shall have power to fret\nOur hearts to tire of it.\n\nA golden land where God\nStayed a Day of His Time,\nNot as the world, where not\nA moment did he abide,\nAnd where His passing left\nThe sense of aught bereft.\n\nMy heart, that thinks of this,\nPines, for it is nowhere,\nAnd she that meets my bliss\nWith her new old love there -\nShe is unreal as all\nThat to this verse I call.\n\nYet who knows? Perhaps this\nIs not wishing, but seeing.\nPerhaps this love, this bliss,\nThis conscious glad not‚Äëbeing\nIs some reality\nThrough fancy seen by me.\n\nPerhaps it casts a spell\nFrom where it can be found.\nWhat is impossible?\nWhere is God's bourne and bound?\nWhy, if I dream this, may\nNot this be mine one day?\n\nWho knows what our dreams are?\nWho knows all that God makes?\nPerhaps life doth but mar\nThe immediate truth that takes\nIts beauty from being dreamed.\nNothing eter merely seemed.\n\nSomewhere where God is nearer\nThese things are een now true.\nOh, let me be no fearer\nThat this may not be so!\nAll is more strange than that\nSmall glimpse of it we get.\n\nMine eyes are wild with joy\nBecause I have these thoughts.\nThey cannot tire nor cloy\nBecause God ever allots\nTo each high thing the power\nTo weigh not on its hour.\n\nMy flower garden is\nFull of new flowers now.\nMy lips are kissed by bliss\nBecause I know not how.\nMy heart fails and I swim\nWithin a luminous rim.\n\nA halo of hope comes round\nMy soul. I am that child\nThat cries: Lo! I have found\nThis flower strange and wild.\nThe unknown flower I have\nGrew on my dead dreams' grave.\n\nA trembling sense of being\nMore than my sense can hold,\nA bird of feeling seeing\nThe great, earth‚Äëhidden gold\nOf the approaching dawn,\nA breath, a light, a swoon,\n\nA presence interwoven\nWith rays of other light,\nA spell, a power untroven\nOf my more clear delight,\nI faint, I fade, I seem\nMyself to be my dream.\n\nAnd if this be not so,\nOh, God, make it now be!\nLet me not find more woe\nBecause I so dreamed Thee!\nLet aught for which I pine\nMerit being divine.\n\nLet this resemble heaven\nAnd be my home for e'er,\nEven if for e'er mean living\nBut this hour really fair.\nAn hour in God shall be\n Enough eternity.", "views": 1982763}, {"author": "Fernando Pessoa", "title": "THE GIANTESS", "content": "I saw a comic giantess \nAt a tremendous feast alone,\nStriving to eat some gorgeous mess\nThat formed a hard whole, as a stone.\nBut for her mouth it was too much\nThat, her avidity being such,\nIt doubled her void wish's hell;\nAnd her mouth's wide, impotent clutch\nWould have made laugh, did it not quell\nLaughter with being horrible.\nAt her impossible, void feast\nI saw her and, seeing her despair,\n¬´What's that too large thing that to eat\nYou idly strive?¬ª I asked of her\nAnd I laughed out serene and rude.\n\nShe wept wild tears and said, ¬´This meat\nThat by its greatness doth elude\nMy constant gaping, wild and sore,\nIs Beauty whole and complete.¬ª\nI looked at her and laughed no more,\nBut I wept, for I understood.", "views": 1982762}, {"author": "Why", "title": "James: Bo!", "content": "1982759\nFernando Pessoa,Quando os povos da Dalm√°cia,\"Quando os povos da Dalm√°cia\nFizeram guerra aos da Gr√©cia\nSaiu muita gente s√©cia\nDa casa do rei da Tr√°cia.\nHouve disto grande fal√°cia,\nL√° para as bandas da Fen√≠cia,\nPor√©m temendo mal√≠cia,\nDe gente t√£o pouco s√≥cia,\nL√° se foram para a Be√≥cia\nPara se curar da icter√≠cia.", "views": 1982760}, {"author": "Fernando Pessoa", "title": "Ro√ßou-me", "content": "Ro√ßou-me\nO [...] pelo rosto o manto seu\nE o seu manto √© de Mal e Escurid√£o.\nCoroou-me rei e a coroa que me deu\n√â um sinal de servid√£o.", "views": 1982758}, {"author": "Fernando Pessoa", "title": "Levas chinelas que batem", "content": "Levas chinelas que batem\nNo ch√£o com o calcanhar.\nAntes quero que me matem\nQue ouvir esse som parar.", "views": 1982757}];

// Carrega dataset JSON (API est√°tica). Por padr√£o: ./data/poems.json
// Voc√™ tamb√©m pode passar ?data=https://.../poems.json
async function loadLocalDataset(){
  const u = new URL(location.href);
  const dataUrl = u.searchParams.get('data') || './data/poems.json';
  try {
    const res = await fetch(dataUrl, { cache: 'no-store' });
    if (!res.ok) throw new Error('HTTP ' + res.status);
    const data = await res.json();
    const items = Array.isArray(data) ? data : (data.items || data.poems || []);
    if (!Array.isArray(items) || items.length === 0) throw new Error('Dataset vazio');
    POEMS = items;
    // Normaliza campos comuns para busca
    for (const p of POEMS) {
      if (!p) continue;
      if (!('text' in p) && ('texto' in p)) p.text = p.texto;
      if (!('poem' in p) && ('texto' in p)) p.poem = p.texto;
      if (!('title' in p) && ('titulo' in p)) p.title = p.titulo;
      if (!('author' in p) && ('autor' in p)) p.author = p.autor;
    }
    try { showToast(`‚úÖ Dataset carregado (${POEMS.length})`); } catch(_) {}
  } catch (e) {
    console.warn('Falha ao carregar dataset:', e);
    POEMS = FALLBACK_POEMS.slice();
    try { showToast(`‚ö†Ô∏è Usando dataset local (${POEMS.length})`); } catch(_) {}
  }
}

/***********************
 * UTIL ‚Äî normaliza√ß√£o e tokens
 ***********************/
const $ = (id) => document.getElementById(id);

const STOPWORDS = new Set([
  "a","o","os","as","e","de","do","da","dos","das","em","no","na","nos","nas",
  "um","uma","uns","umas","para","por","com","sem","ao","aos","√†","√†s",
  "que","se","sua","seu","suas","seus","teu","tua","meu","minha","meus","minhas",
  "nosso","nossa","nossos","nossas","vosso","vossa","voc√™s","voce","vc",
  "pra","pro","itapagipe","salvador","bahia","peninsula","natal"
]);

const SYN = {
  "feliz":"alegria","contente":"alegria","sorriso":"alegria","rindo":"alegria",
  "grato":"gratidao","grata":"gratidao","agradecido":"gratidao","agradecida":"gratidao",
  "ansioso":"ansiedade","ansiosa":"ansiedade","nervoso":"ansiedade","nervosa":"ansiedade","aflito":"ansiedade","aflita":"ansiedade",
  "triste":"tristeza","chorando":"tristeza","deprimido":"tristeza","deprimida":"tristeza","melancolia":"tristeza",
  "cansado":"cansaco","cansada":"cansaco","exausto":"cansaco","exausta":"cansaco",
  "calma":"paz","tranquilo":"paz","tranquila":"paz","sereno":"paz","serena":"paz",
  "amor":"amor","amando":"amor","paixao":"amor","carinho":"amor","querer":"amor",
  "beijo":"beijo","abra√ßo":"abraco","abraco":"abraco","saudade":"saudade",
  "praia":"praia","mar":"mar","sol":"sol","calor":"calor","verao":"verao","brisa":"brisa",
  "recomeco":"recomeco","esperanca":"esperanca"
};

function normalize(s) {
  return (s || "")
    .toLowerCase()
    .normalize("NFD")
    .replace(/[\u0300-\u036f]/g, "")
    .replace(/[^a-z0-9\s\-']/g, " ")
    .replace(/\s+/g, " ")
    .trim();
}

function tokenize(text, minLen=3) {
  const norm = normalize(text);
  if (!norm) return [];
  const raw = norm.split(" ").filter(Boolean);
  const out = [];
  const seen = new Set();
  for (let t of raw) {
    t = t.replace(/^'+|'+$/g, "");
    if (!t || t.length < minLen) continue;
    if (STOPWORDS.has(t)) continue;
    t = SYN[t] || t;
    if (!seen.has(t)) { seen.add(t); out.push(t); }
  }
  return out;
}

function bigrams(tokens, limit=10) {
  const out = [];
  for (let i=0; i<tokens.length-1; i++) {
    out.push(tokens[i] + " " + tokens[i+1]);
    if (out.length >= limit) break;
  }
  return out;
}

function pickKeyword(destTokens, feelTokens) {
  const preferred = ["amor","saudade","abraco","beijo","paz","alegria","esperanca","recomeco","mar","praia","sol","calor"];
  const all = [...destTokens, ...feelTokens];
  if (!all.length) return "amor";
  for (const p of preferred) if (all.includes(p)) return p;
  return [...all].sort((a,b)=> b.length - a.length)[0];
}

function buildQuery() {
  const feelingsText = $("feelings").value || "";
  const toNameText = $("toName").value || "";
  const toWordsText = $("toWords").value || "";

  const destTokens = tokenize(toWordsText, 3);
  const nameTokens = tokenize(toNameText, 4);
  const feelTokens = tokenize(feelingsText, 3);

  const destAll = Array.from(new Set([...destTokens, ...nameTokens]));
  const kw = pickKeyword(destAll, feelTokens);
  const phrases = bigrams(destTokens, 12);
  const keysForSheet = Array.from(new Set([kw, ...destTokens.slice(0,4), ...feelTokens.slice(0,2)].filter(Boolean)));
  return { kw, destTokens: destAll, feelTokens, phrases, keysForSheet };
}

function poemNorm(poem) {
  if (!poem._norm) poem._norm = normalize((poem.title||"") + " " + (poem.author||"") + " " + (poem.content||""));
  return poem._norm;
}

function poemTokenSet(poem) {
  if (!poem._set) poem._set = new Set(poemNorm(poem).split(" ").filter(Boolean));
  return poem._set;
}

function scorePoem(poem, q) {
  const t = poemNorm(poem);
  const set = poemTokenSet(poem);
  let score = 0;

  if (q.kw && (set.has(q.kw) || t.includes(q.kw))) score += 6.2;

  for (const ph of (q.phrases||[])) {
    const p = normalize(ph);
    if (p && t.includes(p)) score += 5.0;
  }

  for (const tok of (q.destTokens||[])) {
    if (!tok) continue;
    if (set.has(tok)) score += (tok.length >= 8 ? 4.6 : tok.length >= 6 ? 3.8 : 3.0);
    else if (t.includes(tok)) score += 1.4;
  }

  for (const tok of (q.feelTokens||[])) {
    if (!tok) continue;
    if (set.has(tok)) score += (tok.length >= 8 ? 2.0 : tok.length >= 6 ? 1.6 : 1.2);
    else if (t.includes(tok)) score += 0.6;
  }

  const anchors = ["amor","saudade","beijo","abraco","paz","alegria","luz","estrela","mar","praia","sol","verao","calor","bahia","salvador","itapagipe","peninsula","natal","presente"];
  for (const a of anchors) if (t.includes(a)) score += 0.28;

  const v = Number(poem.views||0);
  if (v > 0) score += Math.min(1.3, Math.log10(v + 1) / 4);

  return score;
}

function computeMatches(poem, q) {
  const set = poemTokenSet(poem);
  const out = [];
  if (q.kw && set.has(q.kw)) out.push(q.kw);
  for (const tok of (q.destTokens||[])) {
    if (out.length >= 8) break;
    if (tok && set.has(tok) && !out.includes(tok)) out.push(tok);
  }
  return out;
}

function pickFromLocal(q) {
  let bestScore = -1;
  const near = [];

  for (const p of POEMS) {
    const s = scorePoem(p, q);
    if (s > bestScore) {
      bestScore = s;
      near.length = 0;
      near.push({p,s});
    } else if (bestScore > 0 && s >= bestScore * 0.86 && near.length < 14) {
      near.push({p,s});
    }
  }

  if (bestScore < 3.2) {
    const pool = POEMS.filter(p => {
      const t = poemNorm(p);
      return t.includes("amor") || t.includes("saudade") || t.includes("praia") || t.includes("mar") || t.includes("alegria");
    });
    const use = pool.length ? pool : POEMS;
    const poem = use[Math.floor(Math.random()*use.length)];
    return { poem, score: bestScore, matches: [] };
  }

  const chosen = near[Math.floor(Math.random()*near.length)].p;
  return { poem: chosen, score: bestScore, matches: computeMatches(chosen, q) };
}

/***********************
 * BUSCA NA PLANILHA (opcional)
 ***********************/
function escapeQ(s) { return (s || "").replace(/'/g, "\\'"); }

async function fetchFromSheet(q) {
  const keys = (q.keysForSheet || []).map(k => normalize(k)).filter(Boolean);
  const wanted = keys.length ? keys.slice(0, 6) : [normalize(q.kw || "amor")];

  const clauses = wanted.map(k => {
    const safe = escapeQ(k);
    return `(lower(C) contains '${safe}' or lower(B) contains '${safe}')`;
  });

  const tq = `select A,B,C,D where ${clauses.join(" or ")} limit 80`;
  const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?gid=${SHEET_GID}&tqx=out:json&tq=${encodeURIComponent(tq)}`;

  const res = await fetch(url);
  if (!res.ok) throw new Error("Sem acesso √† planilha");
  const txt = await res.text();

  const start = txt.indexOf("{");
  const end = txt.lastIndexOf("}");
  if (start === -1 || end === -1) throw new Error("Resposta inesperada");
  const data = JSON.parse(txt.slice(start, end+1));

  const rows = data?.table?.rows || [];
  const items = rows.map(r => {
    const c = r.c || [];
    return { author: c[0]?.v ?? "", title: c[1]?.v ?? "", content: c[2]?.v ?? "", views: Number(c[3]?.v ?? 0) };
  }).filter(x => x.content);

  if (!items.length) return null;

  const scored = items.map(p => ({p, s: scorePoem(p, q)})).sort((a,b)=>b.s-a.s);
  const max = scored[0]?.s ?? 0;
  const top = scored.filter(x => x.s >= max*0.86).slice(0, 10);
  return top[Math.floor(Math.random()*top.length)].p;
}

/***********************
 * UI
 ***********************/
const openBtn = $("openBtn");
const againBtn = $("againBtn");
const copyBtn = $("copyBtn");
const shareBtn = $("shareBtn");
const gift = $("gift");
const result = $("result");
const poemTitle = $("poemTitle");
const poemAuthor = $("poemAuthor");
const poemText = $("poemText");
const kwLine = $("kwLine");
const matchLine = $("matchLine");
const dedication = $("dedication");
const toast = $("toast");
const onlineToggle = $("onlineToggle");

let lastPoem = null;
let opening = false;

// Inicializa: carrega o dataset antes de liberar o bot√£o de abrir
openBtn.disabled = true;
const _openBtnLabel = openBtn.textContent;
openBtn.textContent = '‚è≥ Carregando poesias...';
loadLocalDataset().finally(() => {
  openBtn.disabled = false;
  openBtn.textContent = _openBtnLabel;
});

function showToast(msg) {
  toast.textContent = msg || "OK";
  toast.classList.add("show");
  setTimeout(()=>toast.classList.remove("show"), 1200);
}

function render(poem, q, matches=[]) {
  lastPoem = poem;

  const name = ($("toName").value || "").trim();
  if (name) {
    dedication.hidden = false;
    dedication.textContent = `Para ${name}, com carinho ‚Äî Itapagipe ‚Ä¢ Salvador/BA üéÑüå¥`;
  } else {
    dedication.hidden = true;
    dedication.textContent = "";
  }

  kwLine.textContent = `Chave do presente: ${q.kw}`;

  if (matches && matches.length) {
    matchLine.hidden = false;
    matchLine.textContent = `Coincid√™ncias: ${matches.slice(0,8).join(", ")}`;
  } else {
    matchLine.hidden = true;
    matchLine.textContent = "";
  }

  poemTitle.textContent = poem.title || "Sem t√≠tulo";
  poemAuthor.textContent = poem.author ? `por ${poem.author}` : "";
  poemText.textContent = poem.content || "";

  result.hidden = false;
  againBtn.disabled = false;
  copyBtn.disabled = false;
  againBtn.classList.remove("hidden");
  copyBtn.classList.remove("hidden");
  gift.classList.add("open");
  burstConfetti();
}

function buildCardText(poem, q) {
  const name = ($("toName").value || "").trim();
  const wordsTo = ($("toWords").value || "").trim();
  const ded = name ? `Para ${name}, com carinho üéÑüå¥
` : "";
  const hint = wordsTo ? `Palavras para o destinat√°rio: ${wordsTo}
` : "";
  const site = "https://www.cordel2pontozero.com/especial-2526";
  const invite = `

‚ú® Quer brincar e dedicar outras poesias?
Acesse: ${site}`;
  return `üéÑüå¥ Presente de Natal na Pen√≠nsula de Itapagipe ‚Äî Salvador/BA
${ded}${hint}Chave do presente: ${q.kw}

${poem.title || ""}${poem.author ? " ‚Äî " + poem.author : ""}

${poem.content || ""}${invite}`;
}

async function copyText(text) {
  try {
    await navigator.clipboard.writeText(text);
    return true;
  } catch {
    const ta = document.createElement("textarea");
    ta.value = text;
    ta.style.position = "fixed";
    ta.style.left = "-9999px";
    document.body.appendChild(ta);
    ta.select();
    let ok = false;
    try { ok = document.execCommand("copy"); } catch { ok = false; }
    document.body.removeChild(ta);
    return ok;
  }
}

async function openGift() {
  if (opening) return;
  opening = true;

  gift.classList.remove("open");
  result.hidden = true;

  const q = buildQuery();
  await new Promise(r => setTimeout(r, 280));

  try {
    let poem = null;
    if (onlineToggle.checked) poem = await fetchFromSheet(q);

    if (!poem) {
      const picked = pickFromLocal(q);
      render(picked.poem, q, picked.matches);
    } else {
      render(poem, q, computeMatches(poem, q));
    }
  } catch {
    const picked = pickFromLocal(q);
    render(picked.poem, q, picked.matches);
    showToast("Usei a lista embutida ‚úÖ");
  } finally {
    opening = false;
  }
}

openBtn.addEventListener("click", openGift);
againBtn.addEventListener("click", openGift);

copyBtn.addEventListener("click", async () => {
  if (!lastPoem) return;
  const ok = await copyText(lastPoem.content || "");
  showToast(ok ? "Poesia copiada ‚úÖ" : "N√£o foi poss√≠vel copiar");
});

shareBtn.addEventListener("click", async () => {
  if (!lastPoem) return;
  const q = buildQuery();
  const ok = await copyText(buildCardText(lastPoem, q));
  showToast(ok ? "Cart√£o copiado ‚úÖ" : "N√£o foi poss√≠vel copiar");
});

/***********************
 * CONFETE (canvas)
 ***********************/
const confetti = $("confetti");
const ctx = confetti.getContext("2d");
let particles = [];
let raf = null;

function resize() {
  const dpr = window.devicePixelRatio || 1;
  confetti.width = Math.floor(window.innerWidth * dpr);
  confetti.height = Math.floor(window.innerHeight * dpr);
  confetti.style.width = window.innerWidth + "px";
  confetti.style.height = window.innerHeight + "px";
  ctx.setTransform(dpr,0,0,dpr,0,0);
}
window.addEventListener("resize", resize);
resize();

function burstConfetti() {
  const w = window.innerWidth;
  const h = window.innerHeight;
  const n = 140;
  particles = [];
  for (let i=0;i<n;i++) {
    particles.push({
      x: w * (0.40 + Math.random()*0.20),
      y: h * (0.18 + Math.random()*0.10),
      vx: (Math.random()-0.5) * 8,
      vy: Math.random() * -8 - 6,
      g: 0.22 + Math.random()*0.12,
      r: 2 + Math.random()*4,
      a: 1,
      rot: Math.random()*Math.PI,
      vr: (Math.random()-0.5)*0.35,
      kind: Math.random() < 0.65 ? "rect" : "dot"
    });
  }
  if (raf) cancelAnimationFrame(raf);
  animate();
}

function animate() {
  ctx.clearRect(0,0,window.innerWidth,window.innerHeight);
  const palette = ["#ffd56a","#ff3a4c","#9cf2ff","#ffffff","#b7ffce","#ffe6f0"];
  for (const p of particles) {
    p.vy += p.g;
    p.x += p.vx;
    p.y += p.vy;
    p.rot += p.vr;
    p.a *= 0.992;

    const col = palette[Math.floor((Math.abs(Math.sin(p.rot)) * palette.length)) % palette.length];

    ctx.save();
    ctx.globalAlpha = Math.max(0, Math.min(1, p.a));
    ctx.translate(p.x, p.y);
    ctx.rotate(p.rot);
    ctx.fillStyle = col;
    if (p.kind === "rect") ctx.fillRect(-p.r, -p.r, p.r*2.4, p.r*1.4);
    else {
      ctx.beginPath();
      ctx.arc(0,0,p.r,0,Math.PI*2);
      ctx.fill();
    }
    ctx.restore();
  }

  particles = particles.filter(p => p.y < window.innerHeight + 40 && p.a > 0.05);
  if (particles.length) raf = requestAnimationFrame(animate);
  else ctx.clearRect(0,0,window.innerWidth,window.innerHeight);
}
</script>
</body>
</html>
